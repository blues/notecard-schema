{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/blues/notecard-schema/master/card.attn.rsp.notecard.api.json",
    "title": "card.attn Response Application Programming Interface (API) Schema",
    "type": "object",
    "version": "1.1.2",
    "apiVersion": "9.1.1",
    "skus": [
        "CELL",
        "CELL+WIFI",
        "LORA",
        "WIFI"
    ],
    "properties": {
        "files": {
            "description": "A list of files changed since `file` attention mode was set. In addition, this field will include keywords to signify the occurrence of other attention mode triggers:",
            "type": "array",
            "items": {
                "type": "string"
            },
            "sub-descriptions": [
                {
                    "const": "connected",
                    "description": "Indicates that the ATTN pin fired due to the Notecard connecting to the network.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "WIFI"
                    ]
                },
                {
                    "const": "env",
                    "description": "Indicates that the ATTN pin fired due to an environment variable change on the Notecard.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "LORA",
                        "WIFI"
                    ]
                },
                {
                    "const": "files",
                    "description": "Indicates that the ATTN pin fired due to a change in one or more monitored Notefiles.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "LORA",
                        "WIFI"
                    ]
                },
                {
                    "const": "location",
                    "description": "Indicates that the ATTN pin fired due to the GPS module making a position fix.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "WIFI"
                    ]
                },
                {
                    "const": "motion",
                    "description": "Indicates that the ATTN pin fired due to the accelerometer detecting motion.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "WIFI"
                    ]
                },
                {
                    "const": "timeout",
                    "description": "Indicates that the ATTN pin fired due to the timeout period specified in `seconds` elapsing.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "LORA",
                        "WIFI"
                    ]
                },
                {
                    "const": "watchdog",
                    "description": "Indicates that the ATTN pin fired due to the watchdog timer expiring.",
                    "skus": [
                        "CELL",
                        "CELL+WIFI",
                        "WIFI"
                    ]
                }
            ],
            "minItems": 1
        },
        "off": {
            "description": "This field is present and set to `true` if ATTN processing has been disabled with the `off` argument.",
            "type": "boolean",
            "minApiVersion": "7.2.1"
        },
        "payload": {
            "description": "When using `sleep` mode with a `payload`, the payload provided by the host to the Notecard.",
            "type": "string",
            "contentEncoding": "base64",
            "skus": [
                "CELL",
                "CELL+WIFI",
                "WIFI"
            ]
        },
        "set": {
            "description": "Reflects the state of the attention pin. The `set` field is `true` when the attention pin is `HIGH`, otherwise the `set` field will not be present when the attention pin is `LOW`.",
            "type": "boolean"
        },
        "time": {
            "description": "When using `sleep` mode with a `payload`, the time (UNIX Epoch time) that the payload was stored by the Notecard.",
            "type": "integer",
            "skus": [
                "CELL",
                "CELL+WIFI",
                "WIFI"
            ]
        }
    },
    "additionalProperties": false,
    "samples": [
        {
            "description": "Example Response",
            "json": "{\"files\": [\"data.qi\", \"modified\"], \"set\": true}"
        }
    ]
}
