{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/blues/notecard-schema/master/env.template.req.notecard.api.json",
    "title": "env.template Request Application Programming Interface (API) Schema",
    "description": "The `env.template` request allows developers to provide a schema for the environment variables the Notecard uses. The provided template allows the Notecard to store environment variables as fixed-length binary records rather than as flexible JSON objects that require much more memory.\n\nUsing templated environment variables also allows the Notecard to optimize the network traffic related to sending and receiving environment variable updates.",
    "type": "object",
    "version": "0.2.1",
    "apiVersion": "9.1.1",
    "skus": [
        "CELL",
        "CELL+WIFI",
        "LORA",
        "WIFI"
    ],
    "properties": {
        "body": {
            "description": "A sample JSON body that specifies environment variables names and values as \"hints\" for the data type. Possible data types are: boolean, integer, float, and string. See [Understanding Template Data Types](/notecard/notecard-walkthrough/low-bandwidth-design#understanding-template-data-types) for a full explanation of type hints.",
            "type": "object"
        },
        "req": {
            "description": "Request for the Notecard (expects response)",
            "const": "env.template"
        },
        "cmd": {
            "description": "Command for the Notecard (no response)",
            "const": "env.template"
        }
    },
    "oneOf": [
        {
            "required": [
                "req"
            ],
            "properties": {
                "req": {
                    "const": "env.template"
                }
            }
        },
        {
            "required": [
                "cmd"
            ],
            "properties": {
                "cmd": {
                    "const": "env.template"
                }
            }
        }
    ],
    "additionalProperties": false,
    "annotations": [
        {
            "title": "note",
            "description": "The `env.template` request is required for using environment variables on Notecard LoRa and a Notecard paired with Starnote."
        }
    ],
    "samples": [
        {
            "title": "Define Environment Variable Template",
            "description": "Provide a schema with data type hints for environment variables.",
            "json": "{\"req\": \"env.template\", \"body\": {\"env_var_int\": 11, \"env_var_string\": \"10\"}}"
        },
        {
            "title": "Complex Template Example",
            "description": "Template with multiple data types including boolean and float.",
            "json": "{\"req\": \"env.template\", \"body\": {\"enabled\": true, \"temperature\": 23.5, \"count\": 42, \"name\": \"sensor\"}}"
        },
        {
            "title": "Clear Template",
            "description": "Clear the environment variable template by omitting the body.",
            "json": "{\"req\": \"env.template\"}"
        }
    ]
}
